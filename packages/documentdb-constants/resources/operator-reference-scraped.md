# DocumentDB Operator Reference

<!-- AUTO-GENERATED by scrape-operator-docs.ts -->
<!-- Last scraped: 2026-02-19 -->
<!-- Source: https://github.com/MicrosoftDocs/azure-databases-docs -->

## Summary

| Category                                                      | Listed  | Total   |
| ------------------------------------------------------------- | ------- | ------- |
| Comparison Query Operators                                    | 8       | 8       |
| Logical Query Operators                                       | 4       | 4       |
| Element Query Operators                                       | 2       | 2       |
| Evaluation Query Operators                                    | 5       | 6       |
| Geospatial Operators                                          | 11      | 11      |
| Array Query Operators                                         | 3       | 3       |
| Bitwise Query Operators                                       | 4       | 4       |
| Projection Operators                                          | 3       | 4       |
| Miscellaneous Query Operators                                 | 3       | 3       |
| Field Update Operators                                        | 9       | 9       |
| Array Update Operators                                        | 12      | 12      |
| Bitwise Update Operators                                      | 1       | 1       |
| Arithmetic Expression Operators                               | 16      | 16      |
| Array Expression Operators                                    | 20      | 20      |
| Bitwise Operators                                             | 4       | 4       |
| Boolean Expression Operators                                  | 3       | 3       |
| Comparison Expression Operators                               | 7       | 7       |
| Custom Aggregation Expression Operators                       | 0       | 2       |
| Data Size Operators                                           | 2       | 2       |
| Date Expression Operators                                     | 22      | 22      |
| Literal Expression Operator                                   | 1       | 1       |
| Miscellaneous Operators                                       | 3       | 3       |
| Object Expression Operators                                   | 3       | 3       |
| Set Expression Operators                                      | 7       | 7       |
| String Expression Operators                                   | 23      | 23      |
| Text Expression Operator                                      | 0       | 1       |
| Timestamp Expression Operators                                | 2       | 2       |
| Trigonometry Expression Operators                             | 15      | 15      |
| Type Expression Operators                                     | 11      | 11      |
| Accumulators ($group, $bucket, $bucketAuto, $setWindowFields) | 21      | 22      |
| Accumulators (in Other Stages)                                | 10      | 10      |
| Variable Expression Operators                                 | 1       | 1       |
| Window Operators                                              | 27      | 27      |
| Conditional Expression Operators                              | 3       | 3       |
| Aggregation Pipeline Stages                                   | 35      | 42      |
| Variables in Aggregation Expressions                          | 7       | 10      |
| **Total**                                                     | **308** | **324** |

## Comparison Query Operators

### $eq

- **Description:** The $eq query operator compares the value of a field to a specified value
- **Syntax:**

```javascript
{
    field: {
        $eq: <value>
    }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/comparison-query/$eq

### $gt

- **Description:** The $gt query operator retrieves documents where the value of a field is greater than a specified value
- **Syntax:**

```javascript
{
  field: {
    $gt: value;
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/comparison-query/$gt

### $gte

- **Description:** The $gte operator retrieves documents where the value of a field is greater than or equal to a specified value
- **Syntax:**

```javascript
{
    field: {
        $gte: <value>
    }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/comparison-query/$gte

### $in

- **Description:** The $in operator matches value of a field against an array of specified values
- **Syntax:**

```javascript
{
  field: {
    $in: [listOfValues];
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/comparison-query/$in

### $lt

- **Description:** The $lt operator retrieves documents where the value of field is less than a specified value
- **Syntax:**

```javascript
{
  field: {
    $lt: value;
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/comparison-query/$lt

### $lte

- **Description:** The $lte operator retrieves documents where the value of a field is less than or equal to a specified value
- **Syntax:**

```javascript
{
    field: {
        $lte: <value>
    }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/comparison-query/$lte

### $ne

- **Description:** The $ne operator retrieves documents where the value of a field doesn't equal a specified value
- **Syntax:**

```javascript
{
  field: {
    $ne: value;
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/comparison-query/$ne

### $nin

- **Description:** The $nin operator retrieves documents where the value of a field doesn't match a list of values
- **Syntax:**

```javascript
{
    field: {
        $nin: [ < listOfValues > ]
    }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/comparison-query/$nin

## Logical Query Operators

### $and

- **Description:** The $and operator joins multiple query clauses and returns documents that match all specified conditions.
- **Syntax:**

```javascript
{
    $and: [{
        < expression1 >
    }, {
        < expression2 >
    }, ..., {
        < expressionN >
    }]
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/logical-query/$and

### $not

- **Description:** The $not operator performs a logical NOT operation on a specified expression, selecting documents that don't match the expression.
- **Syntax:**

```javascript
{
    field: {
        $not: {
            < operator - expression >
        }
    }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/logical-query/$not

### $nor

- **Description:** The $nor operator performs a logical NOR on an array of expressions and retrieves documents that fail all the conditions.
- **Syntax:**

```javascript
{
    $nor: [{
        < expression1 >
    }, {
        < expression2 >
    }, ..., {
        < expressionN >
    }]
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/logical-query/$nor

### $or

- **Description:** The $or operator joins query clauses with a logical OR and returns documents that match at least one of the specified conditions.
- **Syntax:**

```javascript
{
    $or: [{
        < expression1 >
    }, {
        < expression2 >
    }, ..., {
        < expressionN >
    }]
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/logical-query/$or

## Element Query Operators

### $exists

- **Description:** The $exists operator retrieves documents that contain the specified field in their document structure.
- **Syntax:**

```javascript
{
  <field>: { $exists: <true or false> }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/element-query/$exists

### $type

- **Description:** The $type operator retrieves documents if the chosen field is of the specified type.
- **Syntax:**

```javascript
{
  <field>: { $type: <BSON type number> | <string alias> }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/element-query/$type

## Evaluation Query Operators

### $expr

- **Description:** The $expr operator allows the use of aggregation expressions within the query language, enabling complex field comparisons and calculations.
- **Syntax:**

```javascript
{
  $expr: { <aggregation expression> }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/evaluation-query/$expr

### $jsonSchema

- **Description:** The $jsonSchema operator validates documents against a JSON Schema definition for data validation and structure enforcement. Discover supported features and limitations.
- **Syntax:**

```javascript
db.createCollection('collectionName', {
  validator: {
    $jsonSchema: {
      bsonType: 'object',
      required: ['field1', 'field2'],
      properties: {
        field1: {
          bsonType: 'string',
        },
        field2: {
          bsonType: 'int',
          minimum: 0,
          description: 'Description of field2 requirements',
        },
      },
    },
  },
  validationLevel: 'strict', // Optional: "strict" or "moderate"
  validationAction: 'error', // Optional: "error" or "warn"
});
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/evaluation-query/$jsonschema

### $mod

- **Description:** The $mod operator performs a modulo operation on the value of a field and selects documents with a specified result.
- **Syntax:**

```javascript
{
  <field>: { $mod: [ <divisor>, <remainder> ] }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/evaluation-query/$mod

### $regex

- **Description:** The $regex operator provides regular expression capabilities for pattern matching in queries, allowing flexible string matching and searching.
- **Syntax:**

```javascript
{
  <field>: { $regex: <pattern>, $options: <options> }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/evaluation-query/$regex

### $text

- **Description:** The $text operator performs text search on the content of indexed string fields, enabling full-text search capabilities.
- **Syntax:**

```javascript
{
  $text: {
    $search: <string>,
    $language: <string>,
    $caseSensitive: <boolean>,
    $diacriticSensitive: <boolean>
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/evaluation-query/$text

## Geospatial Operators

### $geoIntersects

- **Description:** The $geoIntersects operator selects documents whose location field intersects with a specified GeoJSON object.
- **Syntax:**

```javascript
{
  <location field>: {
    $geoIntersects: {
      $geometry: {
        type: <GeoJSON type>,
        coordinates: <coordinates>
      }
    }
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/geospatial/$geointersects

### $geoWithin

- **Description:** The $geoWithin operator selects documents whose location field is completely within a specified geometry.
- **Syntax:**

```javascript
// Using $box
{
  <location field>: {
    $geoWithin: {
      $box: [ [ <bottom left coordinates> ], [ <upper right coordinates> ] ]
    }
  }
}

// Using $center
{
  <location field>: {
    $geoWithin: {
      $center: [ [ <x>, <y> ], <radius> ]
    }
  }
}

// Using $geometry
{
  <location field>: {
    $geoWithin: {
      $geometry: {
        type: <GeoJSON type>,
        coordinates: <coordinates>
      }
    }
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/geospatial/$geowithin

### $box

- **Description:** The $box operator defines a rectangular area for geospatial queries using coordinate pairs.
- **Syntax:**

```javascript
{
  <location field>: {
    $geoWithin: {
      $box: [
        [<lower_left_longitude>, <lower_left_latitude>],
        [<upper_right_longitude>, <upper_right_latitude>]
      ]
    }
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/geospatial/$box

### $center

- **Description:** The $center operator specifies a circle using legacy coordinate pairs for $geoWithin queries.
- **Syntax:**

```javascript
{
  $geoWithin: {
    $center: [ [ <x>, <y> ], <radius> ]
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/geospatial/$center

### $centerSphere

- **Description:** The $centerSphere operator specifies a circle using spherical geometry for $geoWithin queries.
- **Syntax:**

```javascript
{
  $geoWithin: {
    $centerSphere: [ [ <x>, <y> ], <radius in radians> ]
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/geospatial/$centersphere

### $geometry

- **Description:** The $geometry operator specifies a GeoJSON geometry for geospatial queries.
- **Syntax:**

```javascript
{
  $geometry: {
    type: <GeoJSON type>,
    coordinates: <coordinates>
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/geospatial/$geometry

### $maxDistance

- **Description:** The $maxDistance operator specifies the maximum distance that can exist between two points in a geospatial query.
- **Syntax:**

```javascript
{
  <location field>: {
    $near: {
      $geometry: {
        type: "Point",
        coordinates: [<longitude>, <latitude>]
      },
      $maxDistance: <distance in meters>
    }
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/geospatial/$maxdistance

### $minDistance

- **Description:** The $minDistance operator specifies the minimum distance that must exist between two points in a geospatial query.
- **Syntax:**

```javascript
{
  <location field>: {
    $near: {
      $geometry: {
        type: "Point",
        coordinates: [<longitude>, <latitude>]
      },
      $minDistance: <distance in meters>
    }
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/geospatial/$mindistance

### $polygon

- **Description:** The $polygon operator defines a polygon for geospatial queries, allowing you to find locations within an irregular shape.
- **Syntax:**

```javascript
{
  <location field>: {
    $geoWithin: {
      $geometry: {
        type: "Polygon",
        coordinates: [
          [[<longitude1>, <latitude1>], ..., [<longitudeN>, <latitudeN>], [<longitude1>, <latitude1>]]
        ]
      }
    }
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/geospatial/$polygon

### $near

- **Description:** The $near operator returns documents with location fields that are near a specified point, sorted by distance.
- **Syntax:**

```javascript
{
  <location field>: {
    $near: {
      $geometry: {
        type: "Point",
        coordinates: [<longitude>, <latitude>]
      },
      $maxDistance: <distance in meters>,
      $minDistance: <distance in meters>
    }
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/geospatial/$near

### $nearSphere

- **Description:** The $nearSphere operator returns documents whose location fields are near a specified point on a sphere, sorted by distance on a spherical surface.
- **Syntax:**

```javascript
{
  <location field>: {
    $nearSphere: {
      $geometry: {
        type: "Point",
        coordinates: [<longitude>, <latitude>]
      },
      $maxDistance: <distance in meters>,
      $minDistance: <distance in meters>
    }
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/geospatial/$nearsphere

## Array Query Operators

### $all

- **Description:** The $all operator helps finding array documents matching all the elements.
- **Syntax:**

```javascript
db.collection.find({
    field : {
        $all: [ < value1 > , < value2 > ]
    }
})
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/array-query/$all

### $elemMatch

- **Description:** The $elemmatch operator returns complete array, qualifying criteria with at least one matching array element.
- **Syntax:**

```javascript
db.collection.find({ <field>: { $elemMatch: { <query1>, <query2>, ... } } })
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/array-query/$elemmatch

### $size

- **Description:** The $size operator is used to query documents where an array field has a specified number of elements.
- **Syntax:**

```javascript
db.collection.find({ <field>: { $size: <number> } })
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/array-query/$size

## Bitwise Query Operators

### $bitsAllClear

- **Description:** The $bitsAllClear operator is used to match documents where all the bit positions specified in a bitmask are clear.
- **Syntax:**

```javascript
{
  <field>: { $bitsAllClear: <bitmask> }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/bitwise-query/$bitsallclear

### $bitsAllSet

- **Description:** The bitsAllSet command is used to match documents where all the specified bit positions are set.
- **Syntax:**

```javascript
{
  <field>: { $bitsAllSet: <bitmask> }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/bitwise-query/$bitsallset

### $bitsAnyClear

- **Description:** The $bitsAnyClear operator matches documents where any of the specified bit positions in a bitmask are clear.
- **Syntax:**

```javascript
{
  <field>: { $bitsAnyClear: <bitmask> }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/bitwise-query/$bitsanyclear

### $bitsAnySet

- **Description:** The $bitsAnySet operator returns documents where any of the specified bit positions are set to 1.
- **Syntax:**

```javascript
{
  <field>: { $bitsAnySet: [ <bit positions> ] }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/bitwise-query/$bitsanyset

## Projection Operators

### $

- **Description:** The $ positional operator identifies an element in an array to update without explicitly specifying the position of the element in the array.
- **Syntax:**

```javascript
db.collection.updateOne(
  { <array>: <value> },
  { <update operator>: { "<array>.$": <value> } }
)
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/array-update/$

### $elemMatch

- **Description:** The $elemmatch operator returns complete array, qualifying criteria with at least one matching array element.
- **Syntax:**

```javascript
db.collection.find({ <field>: { $elemMatch: { <query1>, <query2>, ... } } })
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/array-query/$elemmatch

### $slice

- **Description:** The $slice operator returns a subset of an array from any element onwards in the array.
- **Syntax:**

```javascript
{
  $slice: [ <array>, <n> ]
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/array-expression/$slice

## Miscellaneous Query Operators

### $comment

- **Description:** The $comment operator adds a comment to a query to help identify the query in logs and profiler output.
- **Syntax:**

```javascript
{
  $comment: <string>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/miscellaneous-query/$comment

### $rand

- **Description:** The $rand operator generates a random float value between 0 and 1.
- **Syntax:**

```javascript
{
  $rand: {
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/miscellaneous-query/$rand

### $natural

- **Description:** The $natural operator forces the query to use the natural order of documents in a collection, providing control over document ordering and retrieval.
- **Syntax:**

```javascript
{
  $natural: <1 | -1>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/miscellaneous-query/$natural

## Field Update Operators

### $currentDate

- **Description:** The $currentDate operator sets the value of a field to the current date, either as a Date or a timestamp.
- **Syntax:**

```javascript
{
  $currentDate: {
    <field1>: <typeSpecification1>,
    <field2>: <typeSpecification2>,
    ...
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/field-update/$currentdate

### $inc

- **Description:** The $inc operator increments the value of a field by a specified amount.
- **Syntax:**

```javascript
{
  $inc: {
    <field1>: <amount1>,
    <field2>: <amount2>,
    ...
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/field-update/$inc

### $min

- **Description:** Retrieves the minimum value for a specified field
- **Syntax:**

```javascript
$min: <expression>
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$min

### $max

- **Description:** The $max operator returns the maximum value from a set of input values.
- **Syntax:**

```javascript
$max: <expression>
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$max

### $mul

- **Description:** The $mul operator multiplies the value of a field by a specified number.
- **Syntax:**

```javascript
{
  $mul: {
    <field1>: <number1>,
    <field2>: <number2>,
    ...
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/field-update/$mul

### $rename

- **Description:** The $rename operator allows renaming fields in documents during update operations.
- **Syntax:**

```javascript
{
  $rename: {
    <field1>: <newName1>,
    <field2>: <newName2>,
    ...
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/field-update/$rename

### $set

- **Description:** The $set operator in Azure DocumentDB updates or creates a new field with a specified value
- **Syntax:**

```javascript
{
  $set: {
    newField: <expression>
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/aggregation/$set

### $setOnInsert

- **Description:** The $setOnInsert operator sets field values only when an upsert operation results in an insert of a new document.
- **Syntax:**

```javascript
{
  $setOnInsert: {
    <field1>: <value1>,
    <field2>: <value2>,
    ...
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/field-update/$setoninsert

### $unset

- **Description:** The $unset stage in the aggregation pipeline is used to remove specified fields from documents.
- **Syntax:**

```javascript
{
    $unset: "<field1>" | ["<field1>", "<field2>", ...]
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/aggregation/$unset

## Array Update Operators

### $

- **Description:** The $ positional operator identifies an element in an array to update without explicitly specifying the position of the element in the array.
- **Syntax:**

```javascript
db.collection.updateOne(
  { <array>: <value> },
  { <update operator>: { "<array>.$": <value> } }
)
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/array-update/$

### $[]

### $[identifier]

### $addToSet

- **Description:** The addToSet operator adds elements to an array if they don't already exist, while ensuring uniqueness of elements within the set.
- **Syntax:**

```javascript
{
  $addToSet: { <field1>: <value1> }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/array-update/$addtoset

### $pop

- **Description:** Removes the first or last element of an array.
- **Syntax:**

```javascript
{
  $pop: {
    <field>: <value>
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/array-update/$pop

### $pull

- **Description:** Removes all instances of a value from an array.
- **Syntax:**

```javascript
{
  $pull: { <field>: <value|condition> }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/array-update/$pull

### $push

- **Description:** The $push operator adds a specified value to an array within a document.
- **Syntax:**

```javascript
db.collection.update({
    < query >
}, {
    $push: {
        < field >: < value >
    }
}, {
    < options >
})
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/array-update/$push

### $pullAll

- **Description:** The $pullAll operator is used to remove all instances of the specified values from an array.
- **Syntax:**

```javascript
{
  $pullAll: { <field1>: [ <value1>, <value2>] }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/array-update/$pullall

### $each

- **Description:** The $each operator is used within an `$addToSet`or`$push` operation to add multiple elements to an array field in a single update operation.
- **Syntax:**

```javascript
{
  $push: {
    <field>: {
      $each: [ <value1>, <value2>],
      <modifier1>: <value1>,
      <modifier2>: <value2>
    }
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/array-update/$each

### $position

### $slice

- **Description:** The $slice operator returns a subset of an array from any element onwards in the array.
- **Syntax:**

```javascript
{
  $slice: [ <array>, <n> ]
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/array-expression/$slice

### $sort

- **Description:** The $sort stage in the aggregation pipeline is used to order the documents in the pipeline by a specified field or fields.
- **Syntax:**

```javascript
{
    $sort: {
        < field1 >: < sort order > ,
        < field2 >: < sort order >
    }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/aggregation/$sort

## Bitwise Update Operators

### $bit

- **Description:** The `$bit` operator is used to perform bitwise operations on integer values.
- **Syntax:**

```javascript
{
    $bit: {
        < field >: {
            < operator >: < number >
        }
    }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/bitwise-update/$bit

## Arithmetic Expression Operators

### $abs

- **Description:** The $abs operator returns the absolute value of a number.
- **Syntax:**

```javascript
{
  $abs: <expression>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/arithmetic-expression/$abs

### $add

- **Description:** The $add operator returns the sum of two numbers or the sum of a date and numbers.
- **Syntax:**

```javascript
{
  $add: [ <listOfExpressions> ]
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/arithmetic-expression/$add

### $ceil

- **Description:** The $ceil operator returns the smallest integer greater than or equal to the specified number.
- **Syntax:**

```javascript
{
  $ceil: <number>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/arithmetic-expression/$ceil

### $divide

- **Description:** The $divide operator divides two numbers and returns the quotient.
- **Syntax:**

```javascript
{
  $divide: [ <dividend>, <divisor> ]
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/arithmetic-expression/$divide

### $exp

- **Description:** The $exp operator raises e to the specified exponent and returns the result
- **Syntax:**

```javascript
{
  $exp: <exponent>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/arithmetic-expression/$exp

### $floor

- **Description:** The $floor operator returns the largest integer less than or equal to the specified number
- **Syntax:**

```javascript
{
  $floor: <number>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/arithmetic-expression/$floor

### $ln

- **Description:** The $ln operator calculates the natural logarithm of the input
- **Syntax:**

```javascript
{
  $ln: <number>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/arithmetic-expression/$ln

### $log

- **Description:** The $log operator calculates the logarithm of a number in the specified base
- **Syntax:**

```javascript
{
  $log: [ <number>, <base> ]
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/arithmetic-expression/$log

### $log10

- **Description:** The $log10 operator calculates the log of a specified number in base 10
- **Syntax:**

```javascript
{
  $log10: <number>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/arithmetic-expression/$log10

### $mod

- **Description:** The $mod operator performs a modulo operation on the value of a field and selects documents with a specified result.
- **Syntax:**

```javascript
{
  <field>: { $mod: [ <divisor>, <remainder> ] }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/evaluation-query/$mod

### $multiply

- **Description:** The $multiply operator multiplies the input numerical values
- **Syntax:**

```javascript
{
  $multiply: [ <listOfValues> ]
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/arithmetic-expression/$multiply

### $pow

- **Description:** The `$pow` operator calculates the value of a numerical value raised to the power of a specified exponent.
- **Syntax:**

```javascript
{
  $pow: [ <number>, <exponent> ]
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/arithmetic-expression/$pow

### $round

- **Description:** The $round operator rounds a number to a specified decimal place.
- **Syntax:**

```javascript
{
  $round: [ <number>, <place> ]
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/arithmetic-expression/$round

### $sqrt

- **Description:** The $sqrt operator calculates and returns the square root of an input number
- **Syntax:**

```javascript
{
  $sqrt: <expression>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/arithmetic-expression/$sqrt

### $subtract

- **Description:** The $subtract operator subtracts two numbers and returns the result.
- **Syntax:**

```javascript
{
  $subtract: [ <expression 1>, <expression 2> ]
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/arithmetic-expression/$subtract

### $trunc

- **Description:** The $trunc operator truncates a number to a specified decimal place.
- **Syntax:**

```javascript
{
  $trunc: [ <number>, <decimal place> ]
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/arithmetic-expression/$trunc

## Array Expression Operators

### $arrayElemAt

- **Description:** The $arrayElemAt returns the element at the specified array index.
- **Syntax:**

```javascript
{
  $arrayElemAt: ["<array>", <idx>]
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/array-expression/$arrayelemat

### $arrayToObject

- **Description:** The $arrayToObject allows converting an array into a single document.
- **Syntax:**

```javascript
{
  $arrayToObject: '<array>';
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/array-expression/$arraytoobject

### $concatArrays

- **Description:** The $concatArrays is used to combine multiple arrays into a single array.
- **Syntax:**

```javascript
{
  $concatArrays: ['<array1>', '<array2>'];
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/array-expression/$concatarrays

### $filter

- **Description:** The $filter operator filters for elements from an array based on a specified condition.
- **Syntax:**

```javascript
{
  $filter: {
    input: "<array>",
    as: "<string>",
    cond: "<expression>"
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/array-expression/$filter

### $firstN

- **Description:** The $firstN operator sorts documents on one or more fields specified by the query and returns the first N document matching the filtering criteria
- **Syntax:**

```javascript
{
    $firstN: {
        input: [listOfFields],
        sortBy: {
            <fieldName>: <sortOrder>
        },
        n: <numDocumentsToReturn>
    }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$firstn

### $in

- **Description:** The $in operator matches value of a field against an array of specified values
- **Syntax:**

```javascript
{
  field: {
    $in: [listOfValues];
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/comparison-query/$in

### $indexOfArray

- **Description:** The $indexOfArray operator is used to search for an element in an array and return the index of the first occurrence of the element.
- **Syntax:**

```javascript
{
    $indexOfArray: [ < array > , < searchElement > , < start > , < end > ]
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/array-expression/$indexofarray

### $isArray

- **Description:** The $isArray operator is used to determine if a specified value is an array.
- **Syntax:**

```javascript
{
  $isArray: <expression>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/array-expression/$isarray

### $lastN

- **Description:** The $lastN accumulator operator returns the last N values in a group of documents.
- **Syntax:**

```javascript
{
    $group: {
        _id: < expression > ,
        < field >: {
            $lastN: {
                 n: < number >,
                 input: < expression >
            }
        }
    }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$lastn

### $map

- **Description:** The $map operator allows applying an expression to each element in an array.
- **Syntax:**

```javascript
{
  $map: {
    input: <array>,
    as: <variable>,
    in: <expression>
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/array-expression/$map

### $maxN

- **Description:** Retrieves the top N values based on a specified filtering criteria
- **Syntax:**

```javascript
$maxN: {
    input: < field or expression > ,
    n: < number of values to retrieve >
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$maxn

### $minN

- **Description:** Retrieves the bottom N values based on a specified filtering criteria
- **Syntax:**

```javascript
$minN: {
    input: < field or expression > ,
    n: < number of values to retrieve >
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$minn

### $objectToArray

### $range

- **Description:** The $range operator allows generating an array of sequential integers.
- **Syntax:**

```javascript
{
    $range: [ <start>, <end>, <step> ]
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/array-expression/$range

### $reduce

- **Description:** The $reduce operator applies an expression to each element in an array & accumulate result as single value.
- **Syntax:**

```javascript
$reduce: {
   input: <array>,
   initialValue: <expression>,
   in: <expression>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/array-expression/$reduce

### $reverseArray

- **Description:** The $reverseArray operator is used to reverse the order of elements in an array.
- **Syntax:**

```javascript
{
  $reverseArray: <array>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/array-expression/$reversearray

### $size

- **Description:** The $size operator is used to query documents where an array field has a specified number of elements.
- **Syntax:**

```javascript
db.collection.find({ <field>: { $size: <number> } })
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/array-query/$size

### $slice

- **Description:** The $slice operator returns a subset of an array from any element onwards in the array.
- **Syntax:**

```javascript
{
  $slice: [ <array>, <n> ]
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/array-expression/$slice

### $sortArray

- **Description:** The $sortArray operator helps in sorting the elements in an array.
- **Syntax:**

```javascript
{
  $sortArray: {
    input: <arrayExpression>,
    sortBy: <sortSpecification>
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/array-expression/$sortarray

### $zip

- **Description:** The $zip operator allows merging two or more arrays element-wise into a single array or arrays.
- **Syntax:**

```javascript
{
  $zip: {
    inputs: [ <array1>, <array2>, ... ],
    useLongestLength: <boolean>, // Optional
    defaults: <array> // Optional
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/array-expression/$zip

## Bitwise Operators

### $bitAnd

- **Description:** The $bitAnd operator performs a bitwise AND operation on integer values and returns the result as an integer.
- **Syntax:**

```javascript
{
  $bitAnd: [ <expression1>, <expression2>, ... ]
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/bitwise/$bitand

### $bitNot

- **Description:** The $bitNot operator performs a bitwise NOT operation on integer values and returns the result as an integer.
- **Syntax:**

```javascript
{
  $bitNot: <expression>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/bitwise/$bitnot

### $bitOr

- **Description:** The $bitOr operator performs a bitwise OR operation on integer values and returns the result as an integer.
- **Syntax:**

```javascript
{
  $bitOr: [ <expression1>, <expression2>, ... ]
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/bitwise/$bitor

### $bitXor

- **Description:** The $bitXor operator performs a bitwise XOR operation on integer values.
- **Syntax:**

```javascript
{
  $bitXor: [ <expression1>, <expression2>, ... ]
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/bitwise/$bitxor

## Boolean Expression Operators

### $and

- **Description:** The $and operator joins multiple query clauses and returns documents that match all specified conditions.
- **Syntax:**

```javascript
{
    $and: [{
        < expression1 >
    }, {
        < expression2 >
    }, ..., {
        < expressionN >
    }]
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/logical-query/$and

### $not

- **Description:** The $not operator performs a logical NOT operation on a specified expression, selecting documents that don't match the expression.
- **Syntax:**

```javascript
{
    field: {
        $not: {
            < operator - expression >
        }
    }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/logical-query/$not

### $or

- **Description:** The $or operator joins query clauses with a logical OR and returns documents that match at least one of the specified conditions.
- **Syntax:**

```javascript
{
    $or: [{
        < expression1 >
    }, {
        < expression2 >
    }, ..., {
        < expressionN >
    }]
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/logical-query/$or

## Comparison Expression Operators

### $cmp

- **Description:** The $cmp operator compares two values
- **Syntax:**

```javascript
{
  $cmp: [<firstValueToCompare>, <secondValueToCompare>]
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/comparison-query/$cmp

### $eq

- **Description:** The $eq query operator compares the value of a field to a specified value
- **Syntax:**

```javascript
{
    field: {
        $eq: <value>
    }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/comparison-query/$eq

### $gt

- **Description:** The $gt query operator retrieves documents where the value of a field is greater than a specified value
- **Syntax:**

```javascript
{
  field: {
    $gt: value;
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/comparison-query/$gt

### $gte

- **Description:** The $gte operator retrieves documents where the value of a field is greater than or equal to a specified value
- **Syntax:**

```javascript
{
    field: {
        $gte: <value>
    }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/comparison-query/$gte

### $lt

- **Description:** The $lt operator retrieves documents where the value of field is less than a specified value
- **Syntax:**

```javascript
{
  field: {
    $lt: value;
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/comparison-query/$lt

### $lte

- **Description:** The $lte operator retrieves documents where the value of a field is less than or equal to a specified value
- **Syntax:**

```javascript
{
    field: {
        $lte: <value>
    }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/comparison-query/$lte

### $ne

- **Description:** The $ne operator retrieves documents where the value of a field doesn't equal a specified value
- **Syntax:**

```javascript
{
  field: {
    $ne: value;
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/comparison-query/$ne

## Data Size Operators

### $bsonSize

- **Description:** The $bsonSize operator returns the size of a document in bytes when encoded as BSON.
- **Syntax:**

```javascript
{
  $bsonSize: <expression>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/data-size/$bsonsize

### $binarySize

- **Description:** The $binarySize operator is used to return the size of a binary data field.
- **Syntax:**

```javascript
{
  $binarySize: '<field>';
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/data-size/$binarysize

## Date Expression Operators

### $dateAdd

- **Description:** The $dateAdd operator adds a specified number of time units (day, hour, month etc) to a date.
- **Syntax:**

```javascript
$dateAdd: {
   startDate: <expression>,
   unit: <string>,
   amount: <number>,
   timezone: <string>  // Optional
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/date-expression/$dateadd

### $dateDiff

- **Description:** The $dateDiff operator calculates the difference between two dates in various units such as years, months, days, etc.
- **Syntax:**

```javascript
$dateDiff: {
   startDate: <expression>,
   endDate: <expression>,
   unit: <string>,
   timezone: <string>, // Optional
   startOfWeek: <string> // Optional
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/date-expression/$datediff

### $dateFromParts

- **Description:** The $dateFromParts operator constructs a date from individual components.
- **Syntax:**

```javascript
{
    $dateFromParts: {
        year: < year > ,
        month: < month > ,
        day: < day > ,
        hour: < hour > ,
        minute: < minute > ,
        second: < second > ,
        millisecond: < millisecond > ,
        timezone: < timezone >
    }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/date-expression/$datefromparts

### $dateFromString

- **Description:** The $dateDiff operator converts a date/time string to a date object.
- **Syntax:**

```javascript
{
    $dateFromString: {
        dateString: < string > ,
        format: < string > ,
        timezone: < string > ,
        onError: < expression > ,
        onNull: < expression >
    }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/date-expression/$datefromstring

### $dateSubtract

- **Description:** The $dateSubtract operator subtracts a specified amount of time from a date.
- **Syntax:**

```javascript
{
  $dateSubtract: {
    startDate: <dateExpression>,
    unit: "<unit>",
    amount: <number>,
    timezone: "<timezone>" // optional
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/date-expression/$datesubtract

### $dateToParts

- **Description:** The $dateToParts operator decomposes a date into its individual parts such as year, month, day, and more.
- **Syntax:**

```javascript
$dateToParts: {
  date: <dateExpression>,
  timezone: <string>, // optional
  iso8601: <boolean> // optional
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/date-expression/$datetoparts

### $dateToString

- **Description:** The $dateToString operator converts a date object into a formatted string.
- **Syntax:**

```javascript
{
  $dateToString: {
    format: "<format_string>",
    date: <date_expression>,
    timezone: "<timezone>",
    onNull: "<replacement_value>"
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/date-expression/$datetostring

### $dateTrunc

- **Description:** The $dateTrunc operator truncates a date to a specified unit.
- **Syntax:**

```javascript
$dateTrunc: {
    date: <dateExpression>,
    unit: "<unit>",
    binSize: <number>,       // optional
    timezone: "<timezone>",  // optional
    startOfWeek: "<day>"     // optional (used when unit is "week")
  }
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/date-expression/$datetrunc

### $dayOfMonth

- **Description:** The $dayOfMonth operator extracts the day of the month from a date.
- **Syntax:**

```javascript
{
  $dayOfMonth: <dateExpression>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/date-expression/$dayofmonth

### $dayOfWeek

- **Description:** The $dayOfWeek operator extracts the day of the week from a date.
- **Syntax:**

```javascript
{
  $dayOfWeek: <dateExpression>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/date-expression/$dayofweek

### $dayOfYear

- **Description:** The $dayOfYear operator extracts the day of the year from a date.
- **Syntax:**

```javascript
{
  $dayOfYear: <dateExpression>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/date-expression/$dayofyear

### $hour

- **Description:** The $hour operator returns the hour portion of a date as a number between 0 and 23.
- **Syntax:**

```javascript
{
  $hour: <dateExpression>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/date-expression/$hour

### $isoDayOfWeek

- **Description:** The $isoDayOfWeek operator returns the weekday number in ISO 8601 format, ranging from 1 (Monday) to 7 (Sunday).
- **Syntax:**

```javascript
{
  $isoDayOfWeek: <dateExpression>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/date-expression/$isodayofweek

### $isoWeek

- **Description:** The $isoWeek operator returns the week number of the year in ISO 8601 format, ranging from 1 to 53.
- **Syntax:**

```javascript
{
  $isoWeek: <dateExpression>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/date-expression/$isoweek

### $isoWeekYear

- **Description:** The $isoWeekYear operator returns the year number in ISO 8601 format, which can differ from the calendar year for dates at the beginning or end of the year.
- **Syntax:**

```javascript
{
  $isoWeekYear: <dateExpression>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/date-expression/$isoweekyear

### $millisecond

- **Description:** The $millisecond operator extracts the milliseconds portion from a date value.
- **Syntax:**

```javascript
{
  $millisecond: <dateExpression>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/date-expression/$millisecond

### $minute

- **Description:** The $minute operator extracts the minute portion from a date value.
- **Syntax:**

```javascript
{
  $minute: <dateExpression>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/date-expression/$minute

### $month

- **Description:** The $month operator extracts the month portion from a date value.
- **Syntax:**

```javascript
{
  $month: <dateExpression>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/date-expression/$month

### $second

- **Description:** The $second operator extracts the seconds portion from a date value.
- **Syntax:**

```javascript
{
  $second: <dateExpression>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/date-expression/$second

### $toDate

- **Description:** The $toDate operator converts supported types to a proper Date object.
- **Syntax:**

```javascript
{
  $toDate: <expression>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/aggregation/type-expression/$todate

### $week

- **Description:** The $week operator returns the week number for a date as a value between 0 and 53.
- **Syntax:**

```javascript
{
  $week: <dateExpression>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/date-expression/$week

### $year

- **Description:** The $year operator returns the year for a date as a four-digit number.
- **Syntax:**

```javascript
{
  $year: <dateExpression>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/date-expression/$year

## Literal Expression Operator

### $literal

- **Description:** The $literal operator returns the specified value without parsing it as an expression, allowing literal values to be used in aggregation pipelines.
- **Syntax:**

```javascript
{
  $literal: <value>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/literal-expression/$literal

## Miscellaneous Operators

### $getField

- **Description:** The $getField operator allows retrieving the value of a specified field from a document.
- **Syntax:**

```javascript
{
  $getField: {
    field: <string>,
    input: <document>
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/miscellaneous/$getfield

### $rand

- **Description:** The $rand operator generates a random float value between 0 and 1.
- **Syntax:**

```javascript
{
  $rand: {
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/miscellaneous-query/$rand

### $sampleRate

- **Description:** The $sampleRate operator randomly samples documents from a collection based on a specified probability rate, useful for statistical analysis and testing.
- **Syntax:**

```javascript
{
  $match: {
    $sampleRate: <number>
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/miscellaneous/$samplerate

## Object Expression Operators

### $mergeObjects

- **Description:** The $mergeObjects operator merges multiple documents into a single document
- **Syntax:**

```javascript
{
  $mergeObjects: [ < document1 > , < document2 > , ...]
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/object-expression/$mergeobjects

### $objectToArray

- **Description:** The objectToArray command is used to transform a document (object) into an array of key-value pairs.
- **Syntax:**

```javascript
{
  $objectToArray: <object>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/object-expression/$objecttoarray

### $setField

- **Description:** The setField command is used to add, update, or remove fields in embedded documents.
- **Syntax:**

```javascript
{
  $setField: {
    field: <fieldName>,
    input: <expression>,
    value: <expression>
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/object-expression/$setfield

## Set Expression Operators

### $allElementsTrue

- **Description:** The $allElementsTrue operator returns true if all elements in an array evaluate to true.
- **Syntax:**

```javascript
{
  $allElementsTrue: [ <array> ]
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/set-expression/$allelementstrue

### $anyElementTrue

- **Description:** The $anyElementTrue operator returns true if any element in an array evaluates to a value of true.
- **Syntax:**

```javascript
{
  $anyElementTrue: [ <array> ]
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/set-expression/$anyelementtrue

### $setDifference

- **Description:** The $setDifference operator returns a set with elements that exist in one set but not in a second set.
- **Syntax:**

```javascript
{
  $setDifference: [ <array1>, <array2> ]
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/set-expression/$setdifference

### $setEquals

- **Description:** The $setEquals operator returns true if two sets have the same distinct elements.
- **Syntax:**

```javascript
{
  $setEquals: [ <array1>, <array2>, ... ]
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/set-expression/$setequals

### $setIntersection

- **Description:** The $setIntersection operator returns the common elements that appear in all input arrays.
- **Syntax:**

```javascript
{
  $setIntersection: [ <array1>, <array2>, ... ]
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/set-expression/$setintersection

### $setIsSubset

- **Description:** The $setIsSubset operator determines if one array is a subset of a second array.
- **Syntax:**

```javascript
{
  $setIsSubset: [ <array1>, <array2> ]
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/set-expression/$setissubset

### $setUnion

- **Description:** The $setUnion operator returns an array that contains all the unique elements from the input arrays.
- **Syntax:**

```javascript
{
  $setUnion: [ <array1>, <array2>, ... ]
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/set-expression/$setunion

## String Expression Operators

### $concat

### $dateFromString

- **Description:** The $dateDiff operator converts a date/time string to a date object.
- **Syntax:**

```javascript
{
    $dateFromString: {
        dateString: < string > ,
        format: < string > ,
        timezone: < string > ,
        onError: < expression > ,
        onNull: < expression >
    }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/date-expression/$datefromstring

### $dateToString

- **Description:** The $dateToString operator converts a date object into a formatted string.
- **Syntax:**

```javascript
{
  $dateToString: {
    format: "<format_string>",
    date: <date_expression>,
    timezone: "<timezone>",
    onNull: "<replacement_value>"
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/date-expression/$datetostring

### $indexOfBytes

### $indexOfCP

### $ltrim

### $regexFind

### $regexFindAll

### $regexMatch

### $replaceOne

### $replaceAll

### $rtrim

### $split

### $strLenBytes

### $strLenCP

### $strcasecmp

### $substr

### $substrBytes

### $substrCP

### $toLower

### $toString

- **Description:** The $toString operator converts an expression into a String
- **Syntax:**

```javascript
{
    $toString: < expression >
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/aggregation/type-expression/$tostring

### $trim

### $toUpper

## Timestamp Expression Operators

### $tsIncrement

- **Description:** The $tsIncrement operator extracts the increment portion from a timestamp value.
- **Syntax:**

```javascript
{
  $tsIncrement: <expression>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/timestamp-expression/$tsincrement

### $tsSecond

- **Description:** The $tsSecond operator extracts the seconds portion from a timestamp value.
- **Syntax:**

```javascript
{
  $tsSecond: <expression>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/timestamp-expression/$tssecond

## Trigonometry Expression Operators

### $sin

### $cos

### $tan

### $asin

### $acos

### $atan

### $atan2

### $asinh

### $acosh

### $atanh

### $sinh

### $cosh

### $tanh

### $degreesToRadians

### $radiansToDegrees

## Type Expression Operators

### $convert

- **Description:** The $convert operator converts an expression into the specified type
- **Syntax:**

```javascript
{
    $convert: {
        input: < expression > ,
        to: < type > ,
        format: < binData format > ,
        onError: < value to return on error > ,
        onNull: < value to return on null >
    }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/aggregation/type-expression/$convert

### $isNumber

- **Description:** The $isNumber operator checks if a specified expression is a numerical type
- **Syntax:**

```javascript
{
    $isNumber: < expression >
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/aggregation/type-expression/$isnumber

### $toBool

- **Description:** The $toBool operator converts an expression into a Boolean type
- **Syntax:**

```javascript
{
    $toBool: < expression >
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/aggregation/type-expression/$tobool

### $toDate

- **Description:** The $toDate operator converts supported types to a proper Date object.
- **Syntax:**

```javascript
{
  $toDate: <expression>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/aggregation/type-expression/$todate

### $toDecimal

- **Description:** The $toDecimal operator converts an expression into a Decimal type
- **Syntax:**

```javascript
{
    $toDecimal: < expression >
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/aggregation/type-expression/$todecimal

### $toDouble

- **Description:** The $toDouble operator converts an expression into a Double value
- **Syntax:**

```javascript
{
    $toDouble: < expression >
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/aggregation/type-expression/$todouble

### $toInt

- **Description:** The $toInt operator converts an expression into an Integer
- **Syntax:**

```javascript
{
    $toInt: < expression >
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/aggregation/type-expression/$toint

### $toLong

- **Description:** The $toLong operator converts an expression into a Long value
- **Syntax:**

```javascript
{
    $toLong: < expression >
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/aggregation/type-expression/$tolong

### $toObjectId

- **Description:** The $toObjectId operator converts an expression into an ObjectId
- **Syntax:**

```javascript
{
    $toObject: < expression >
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/aggregation/type-expression/$toobjectid

### $toString

- **Description:** The $toString operator converts an expression into a String
- **Syntax:**

```javascript
{
    $toString: < expression >
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/aggregation/type-expression/$tostring

### $type

- **Description:** The $type operator retrieves documents if the chosen field is of the specified type.
- **Syntax:**

```javascript
{
  <field>: { $type: <BSON type number> | <string alias> }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/element-query/$type

## Accumulators ($group, $bucket, $bucketAuto, $setWindowFields)

### $addToSet

- **Description:** The addToSet operator adds elements to an array if they don't already exist, while ensuring uniqueness of elements within the set.
- **Syntax:**

```javascript
{
  $addToSet: { <field1>: <value1> }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/array-update/$addtoset

### $avg

- **Description:** Computes the average of numeric values for documents in a group, bucket, or window.
- **Syntax:**

```javascript
$avg: <field or expression>
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$avg

### $bottom

- **Description:** The $bottom operator returns the last document from the query's result set sorted by one or more fields
- **Syntax:**

```javascript
{
    $bottom: {
        output: [listOfFields],
        sortBy: {
            <fieldName>: < sortOrder >
        }
    }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$bottom

### $bottomN

- **Description:** The $bottomN operator returns the last N documents from the result sorted by one or more fields
- **Syntax:**

```javascript
{
    $bottomN: {
        output: [listOfFields],
        sortBy: {
            <fieldName>: < sortOrder >
        },
        n: < numDocumentsToReturn >
    }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$bottomn

### $count

- **Description:** The `$count` operator is used to count the number of documents that match a query filtering criteria.
- **Syntax:**

```javascript
{
  $count: '<fieldName>';
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$count

### $first

- **Description:** The $first operator returns the first value in a group according to the group's sorting order.
- **Syntax:**

```javascript
{
    $first: <expression>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$first

### $firstN

- **Description:** The $firstN operator sorts documents on one or more fields specified by the query and returns the first N document matching the filtering criteria
- **Syntax:**

```javascript
{
    $firstN: {
        input: [listOfFields],
        sortBy: {
            <fieldName>: <sortOrder>
        },
        n: <numDocumentsToReturn>
    }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$firstn

### $last

- **Description:** The $last operator returns the last document from the result sorted by one or more fields
- **Syntax:**

```javascript
{
  "$last": <expression>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$last

### $lastN

- **Description:** The $lastN accumulator operator returns the last N values in a group of documents.
- **Syntax:**

```javascript
{
    $group: {
        _id: < expression > ,
        < field >: {
            $lastN: {
                 n: < number >,
                 input: < expression >
            }
        }
    }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$lastn

### $max

- **Description:** The $max operator returns the maximum value from a set of input values.
- **Syntax:**

```javascript
$max: <expression>
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$max

### $maxN

- **Description:** Retrieves the top N values based on a specified filtering criteria
- **Syntax:**

```javascript
$maxN: {
    input: < field or expression > ,
    n: < number of values to retrieve >
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$maxn

### $median

- **Description:** The $median operator calculates the median value of a numeric field in a group of documents.
- **Syntax:**

```javascript
{
    $group: {
        _id: < expression > ,
        medianValue: {
            $median: {
                input: < field or expression > ,
                method: < >
            }
        }
    }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$median

### $mergeObjects

- **Description:** The $mergeObjects operator merges multiple documents into a single document
- **Syntax:**

```javascript
{
  $mergeObjects: [ < document1 > , < document2 > , ...]
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/object-expression/$mergeobjects

### $min

- **Description:** Retrieves the minimum value for a specified field
- **Syntax:**

```javascript
$min: <expression>
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$min

### $percentile

- **Description:** The $percentile operator calculates the percentile of numerical values that match a filtering criteria
- **Syntax:**

```javascript
$percentile: {
    input: < field or expression > ,
    p: [ < percentile values > ],
    method: < method >
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$percentile

### $push

- **Description:** The $push operator adds a specified value to an array within a document.
- **Syntax:**

```javascript
db.collection.update({
    < query >
}, {
    $push: {
        < field >: < value >
    }
}, {
    < options >
})
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/array-update/$push

### $stdDevPop

- **Description:** The $stddevpop operator calculates the standard deviation of the specified values
- **Syntax:**

```javascript
{
  $stddevpop: {
    fieldName;
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$stddevpop

### $stdDevSamp

- **Description:** The $stddevsamp operator calculates the standard deviation of a specified sample of values and not the entire population
- **Syntax:**

```javascript
{
  $stddevsamp: {
    fieldName;
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$stddevsamp

### $sum

- **Description:** The $sum operator calculates the sum of the values of a field based on a filtering criteria
- **Syntax:**

```javascript
{
  $sum: <field or expression>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$sum

### $top

- **Description:** The $top operator returns the first document from the result set sorted by one or more fields
- **Syntax:**

```javascript
{
    $top: {
      output: [listOfFields],
      sortBy: {
          < fieldName >: < sortOrder >
      }
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$top

### $topN

- **Description:** The $topN operator returns the first N documents from the result sorted by one or more fields
- **Syntax:**

```javascript
{
    $topN: {
        output: [listOfFields],
        sortBy: {
            <fieldName>: < sortOrder >
        },
        n: < numDocumentsToReturn >
    }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$topn

## Accumulators (in Other Stages)

### $avg

- **Description:** Computes the average of numeric values for documents in a group, bucket, or window.
- **Syntax:**

```javascript
$avg: <field or expression>
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$avg

### $first

- **Description:** The $first operator returns the first value in a group according to the group's sorting order.
- **Syntax:**

```javascript
{
    $first: <expression>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$first

### $last

- **Description:** The $last operator returns the last document from the result sorted by one or more fields
- **Syntax:**

```javascript
{
  "$last": <expression>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$last

### $max

- **Description:** The $max operator returns the maximum value from a set of input values.
- **Syntax:**

```javascript
$max: <expression>
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$max

### $median

- **Description:** The $median operator calculates the median value of a numeric field in a group of documents.
- **Syntax:**

```javascript
{
    $group: {
        _id: < expression > ,
        medianValue: {
            $median: {
                input: < field or expression > ,
                method: < >
            }
        }
    }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$median

### $min

- **Description:** Retrieves the minimum value for a specified field
- **Syntax:**

```javascript
$min: <expression>
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$min

### $percentile

- **Description:** The $percentile operator calculates the percentile of numerical values that match a filtering criteria
- **Syntax:**

```javascript
$percentile: {
    input: < field or expression > ,
    p: [ < percentile values > ],
    method: < method >
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$percentile

### $stdDevPop

- **Description:** The $stddevpop operator calculates the standard deviation of the specified values
- **Syntax:**

```javascript
{
  $stddevpop: {
    fieldName;
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$stddevpop

### $stdDevSamp

- **Description:** The $stddevsamp operator calculates the standard deviation of a specified sample of values and not the entire population
- **Syntax:**

```javascript
{
  $stddevsamp: {
    fieldName;
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$stddevsamp

### $sum

- **Description:** The $sum operator calculates the sum of the values of a field based on a filtering criteria
- **Syntax:**

```javascript
{
  $sum: <field or expression>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$sum

## Variable Expression Operators

### $let

- **Description:** The $let operator allows defining variables for use in a specified expression, enabling complex calculations and reducing code repetition.
- **Syntax:**

```javascript
{
  $let: {
    vars: {
      <var1>: <expression1>,
      <var2>: <expression2>,
      ...
    },
    in: <expression>
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/variable-expression/$let

## Window Operators

### $sum

- **Description:** The $sum operator calculates the sum of the values of a field based on a filtering criteria
- **Syntax:**

```javascript
{
  $sum: <field or expression>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$sum

### $push

- **Description:** The $push operator adds a specified value to an array within a document.
- **Syntax:**

```javascript
db.collection.update({
    < query >
}, {
    $push: {
        < field >: < value >
    }
}, {
    < options >
})
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/array-update/$push

### $addToSet

- **Description:** The addToSet operator adds elements to an array if they don't already exist, while ensuring uniqueness of elements within the set.
- **Syntax:**

```javascript
{
  $addToSet: { <field1>: <value1> }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/array-update/$addtoset

### $count

- **Description:** The `$count` operator is used to count the number of documents that match a query filtering criteria.
- **Syntax:**

```javascript
{
  $count: '<fieldName>';
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$count

### $max

- **Description:** The $max operator returns the maximum value from a set of input values.
- **Syntax:**

```javascript
$max: <expression>
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$max

### $min

- **Description:** Retrieves the minimum value for a specified field
- **Syntax:**

```javascript
$min: <expression>
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$min

### $avg

- **Description:** Computes the average of numeric values for documents in a group, bucket, or window.
- **Syntax:**

```javascript
$avg: <field or expression>
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$avg

### $stdDevPop

- **Description:** The $stddevpop operator calculates the standard deviation of the specified values
- **Syntax:**

```javascript
{
  $stddevpop: {
    fieldName;
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$stddevpop

### $bottom

- **Description:** The $bottom operator returns the last document from the query's result set sorted by one or more fields
- **Syntax:**

```javascript
{
    $bottom: {
        output: [listOfFields],
        sortBy: {
            <fieldName>: < sortOrder >
        }
    }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$bottom

### $bottomN

- **Description:** The $bottomN operator returns the last N documents from the result sorted by one or more fields
- **Syntax:**

```javascript
{
    $bottomN: {
        output: [listOfFields],
        sortBy: {
            <fieldName>: < sortOrder >
        },
        n: < numDocumentsToReturn >
    }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$bottomn

### $covariancePop

- **Description:** The $covariancePop operator returns the covariance of two numerical expressions
- **Syntax:**

```javascript
{
  $covariancePop: [ < numericalExpression1 > , < numericalExpression2 > ]
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/window-operators/$covariancepop

### $covarianceSamp

- **Description:** The $covarianceSamp operator returns the covariance of a sample of two numerical expressions
- **Syntax:**

```javascript
{
    $covarianceSamp: [ < numericalExpression1 > , < numericalExpression2 > ]
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/window-operators/$covariancesamp

### $denseRank

- **Description:** The $denseRank operator assigns and returns a positional ranking for each document within a partition based on a specified sort order
- **Syntax:**

```javascript
{
  $denseRank: {
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/window-operators/$denserank

### $derivative

- **Description:** The $derivative operator calculates the average rate of change of the value of a field within a specified window.
- **Syntax:**

```javascript
{
    $derivative: {
        input: < expression >,
        unit: < timeWindow >
    }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/window-operators/$derivative

### $documentNumber

- **Description:** The $documentNumber operator assigns and returns a position for each document within a partition based on a specified sort order
- **Syntax:**

```javascript
{
  $documentNumber: {
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/window-operators/$documentnumber

### $expMovingAvg

- **Description:** The $expMovingAvg operator calculates the moving average of a field based on the specified number of documents to hold the highest weight
- **Syntax:**

```javascript
{
    $expMovingAvg: {
        input: < field to use for calculation >,
        N: < number of recent documents with the highest weight
    }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/window-operators/$expmovingavg

### $first

- **Description:** The $first operator returns the first value in a group according to the group's sorting order.
- **Syntax:**

```javascript
{
    $first: <expression>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$first

### $integral

- **Description:** The $integral operator calculates the area under a curve with the specified range of documents forming the adjacent documents for the calculation.
- **Syntax:**

```javascript
{
    $integral: {
        input: < expression > ,
        unit: < time window >
    }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/window-operators/$integral

### $last

- **Description:** The $last operator returns the last document from the result sorted by one or more fields
- **Syntax:**

```javascript
{
  "$last": <expression>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$last

### $linearFill

- **Description:** The $linearFill operator interpolates missing values in a sequence of documents using linear interpolation.
- **Syntax:**

```javascript
{
    $linearFill: {
        input: < expression > ,
        sortBy: {
            < field >: < 1 or - 1 >
        }
    }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/window-operators/$linearfill

### $locf

- **Description:** The $locf operator propagates the last observed non-null value forward within a partition in a windowed query.
- **Syntax:**

```javascript
{
  $locf: {
    input: <expression>,
    sortBy: <document>
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/window-operators/$locf

### $minN

- **Description:** Retrieves the bottom N values based on a specified filtering criteria
- **Syntax:**

```javascript
$minN: {
    input: < field or expression > ,
    n: < number of values to retrieve >
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$minn

### $rank

- **Description:** The $rank operator ranks documents within a partition based on a specified sort order.
- **Syntax:**

```javascript
{
    $setWindowFields: {
        partitionBy: < expression > ,
        sortBy: {
            < field >: < order >
        },
        output: {
            < outputField >: {
                $rank: {}
            }
        }
    }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/window-operators/$rank

### $shift

- **Description:** A window operator that shifts values within a partition and returns the shifted value.
- **Syntax:**

```javascript
{
  $shift: {
    output: <expression>,
    by: <number>,
    default: <expression>
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/window-operators/$shift

### $stdDevSamp

- **Description:** The $stddevsamp operator calculates the standard deviation of a specified sample of values and not the entire population
- **Syntax:**

```javascript
{
  $stddevsamp: {
    fieldName;
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$stddevsamp

### $top

- **Description:** The $top operator returns the first document from the result set sorted by one or more fields
- **Syntax:**

```javascript
{
    $top: {
      output: [listOfFields],
      sortBy: {
          < fieldName >: < sortOrder >
      }
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$top

### $topN

- **Description:** The $topN operator returns the first N documents from the result sorted by one or more fields
- **Syntax:**

```javascript
{
    $topN: {
        output: [listOfFields],
        sortBy: {
            <fieldName>: < sortOrder >
        },
        n: < numDocumentsToReturn >
    }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$topn

## Conditional Expression Operators

### $cond

- **Description:** The $cond operator is used to evaluate a condition and return one of two expressions based on the result.
- **Syntax:**

```javascript
{
   $cond: {
      if: <boolean-expression>,
      then: <true-case>,
      else: <false-case>
   }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/conditional-expression/$cond

### $ifNull

- **Description:** The $ifNull operator is used to evaluate an expression and return a specified value if the expression resolves to null.
- **Syntax:**

```javascript
{
  $ifNull: [ <expression>, <replacement-value> ]
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/conditional-expression/$ifnull

### $switch

- **Description:** The $switch operator is used to evaluate a series of conditions and return a value based on the first condition that evaluates to true.
- **Syntax:**

```javascript
{
  $switch: {
    branches: [
      { case: <expression>, then: <expression> },
      { case: <expression>, then: <expression> }
    ],
    default: <expression>
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/conditional-expression/$switch

## Aggregation Pipeline Stages

### $addFields

- **Description:** The $addFields stage in the aggregation pipeline is used to add new fields to documents.
- **Syntax:**

```javascript
{
  $addFields: {
    <newField1>: <expression1>,
    <newField2>: <expression2>,
    ...
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/aggregation/$addfields

### $bucket

- **Description:** Groups input documents into buckets based on specified boundaries.
- **Syntax:**

```javascript
{
  $bucket: {
    groupBy: <expression>,
    boundaries: [ <lowerBoundary>, <upperBoundary>, ... ],
    default: <defaultBucket>,
    output: {
      <outputField1>: { <accumulator1> },
      ...
    }
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/aggregation/$bucket

### $bucketAuto

### $changeStream

- **Description:** The $changeStream stage opens a change stream cursor to track data changes in real-time.
- **Syntax:**

```javascript
{
  $changeStream: {
    allChangesForCluster: <boolean>,
    fullDocument: <string>,
    fullDocumentBeforeChange: <string>,
    resumeAfter: <ResumeToken>,
    startAfter: <ResumeToken>,
    startAtOperationTime: <Timestamp>,
    showExpandedEvents: <boolean>
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/aggregation/$changestream

### $collStats

- **Description:** The $collStats stage in the aggregation pipeline is used to return statistics about a collection.
- **Syntax:**

```javascript
{
  $collStats: {
    latencyStats: { histograms: <boolean> },
    storageStats: { scale: <number> },
    count: {}
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/aggregation/$collstats

### $count

- **Description:** The `$count` operator is used to count the number of documents that match a query filtering criteria.
- **Syntax:**

```javascript
{
  $count: '<fieldName>';
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/accumulators/$count

### $densify

- **Description:** Adds missing data points in a sequence of values within an array or collection.
- **Syntax:**

```javascript
{
  $densify: {
    field: <field>,
    range: {
      step: <number>,
      unit: <string>, // Optional, e.g., "hour", "day", "month", etc.
      bounds: [<lowerBound>, <upperBound>] // Optional
    },
    partitionByFields: [<field1>, <field2>, ...] // Optional
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/aggregation/$densify

### $documents

- **Description:** The $documents stage creates a pipeline from a set of provided documents.
- **Syntax:**

```javascript
{
  $documents: [
    <document1>,
    <document2>,
    ...
  ]
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/aggregation/$documents

### $facet

- **Description:** The $facet allows for multiple parallel aggregations to be executed within a single pipeline stage.
- **Syntax:**

```javascript
{
  "$facet": {
    "outputField1": [ { "stage1": {} }, { "stage2": {} } ],
    "outputField2": [ { "stage1": {} }, { "stage2": {} } ]
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/aggregation/$facet

### $fill

- **Description:** The $fill stage allows filling missing values in documents based on specified methods and criteria.
- **Syntax:**

```javascript
{
  $fill: {
    sortBy: <sort specification>,
    partitionBy: <partition fields>,
    partitionByFields: <array of partition field names>,
    output: {
      <field1>: { value: <expression> },
      <field2>: { method: <string> }
    }
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/aggregation/$fill

### $geoNear

- **Description:** The $geoNear operator finds and sorts documents by their proximity to a geospatial point, returning distance information for each document.
- **Syntax:**

```javascript
{
  $geoNear: {
    near: {
      type: "Point",
      coordinates: [<longitude>, <latitude>]
    },
    distanceField: <field to store distance>,
    maxDistance: <optional maximum distance in meters>,
    minDistance: <optional minimum distance in meters>,
    query: <optional query conditions>,
    includeLocs: <optional boolean to include locations>,
    distanceMultiplier: <optional distance multiplier>,
    spherical: <boolean, must be true>,
    key: <optional field path>
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/aggregation/$geonear

### $graphLookup

### $group

- **Description:** The $group stage groups documents by specified identifier expressions and applies accumulator expressions.
- **Syntax:**

```javascript
{
  $group: {
    _id: <expression>,
    <field1>: { <accumulator1>: <expression1> },
    <field2>: { <accumulator2>: <expression2> }
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/aggregation/$group

### $indexStats

- **Description:** The $indexStats stage returns usage statistics for each index in the collection.
- **Syntax:**

```javascript
{
  $indexStats: {
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/aggregation/$indexstats

### $limit

### $lookup

- **Description:** The $lookup stage in the Aggregation Framework is used to perform left outer joins with other collections.
- **Syntax:**

```javascript
{
  $lookup: {
    from: <collection to join>,
    localField: <field from input documents>,
    foreignField: <field from the documents of the "from" collection>,
    as: <output array field>
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/aggregation/$lookup

### $match

- **Description:** The $match stage in the aggregation pipeline is used to filter documents that match a specified condition.
- **Syntax:**

```javascript
{
  $match: {
    <query>
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/aggregation/$match

### $merge

- **Description:** The $merge stage in an aggregation pipeline writes the results of the aggregation to a specified collection.
- **Syntax:**

```javascript
{
  $merge: {
    into: <collection>,
    on: <field or fields>,
    whenMatched: <action>,
    whenNotMatched: <action>
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/aggregation/$merge

### $out

- **Description:** The `$out` stage in an aggregation pipeline writes the resulting documents to a specified collection.
- **Syntax:**

```javascript
{
  $out: '<outputCollection>';
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/aggregation/$out

### $project

### $redact

- **Description:** Filters the content of the documents based on access rights.
- **Syntax:**

```javascript
{
  $redact: <expression>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/aggregation/$redact

### $replaceRoot

### $replaceWith

- **Description:** The $replaceWith operator in Azure DocumentDB returns a document after replacing a document with the specified document
- **Syntax:**

```javascript
{
  "$replaceWith": <newDocument>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/aggregation/$replacewith

### $sample

- **Description:** The $sample operator in Azure DocumentDB returns a randomly selected number of documents
- **Syntax:**

```javascript
{
  $sample: { size: <number> }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/aggregation/$sample

### $search

### $searchMeta

### $set

- **Description:** The $set operator in Azure DocumentDB updates or creates a new field with a specified value
- **Syntax:**

```javascript
{
  $set: {
    newField: <expression>
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/aggregation/$set

### $setWindowFields

### $skip

- **Description:** The $skip stage in the aggregation pipeline is used to skip a specified number of documents from the input and pass the remaining documents to the next stage in the pipeline.
- **Syntax:**

```javascript
{
  $skip: <number>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/aggregation/$skip

### $sort

- **Description:** The $sort stage in the aggregation pipeline is used to order the documents in the pipeline by a specified field or fields.
- **Syntax:**

```javascript
{
    $sort: {
        < field1 >: < sort order > ,
        < field2 >: < sort order >
    }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/aggregation/$sort

### $sortByCount

- **Description:** The $sortByCount stage in the aggregation pipeline is used to group documents by a specified expression and then sort the count of documents in each group in descending order.
- **Syntax:**

```javascript
{
  $sortByCount: <expression>
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/aggregation/$sortbycount

### $unionWith

### $unset

- **Description:** The $unset stage in the aggregation pipeline is used to remove specified fields from documents.
- **Syntax:**

```javascript
{
    $unset: "<field1>" | ["<field1>", "<field2>", ...]
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/aggregation/$unset

### $unwind

- **Description:** The $unwind stage in the aggregation framework is used to deconstruct an array field from the input documents to output a document for each element.
- **Syntax:**

```javascript
{
  $unwind: {
    path: <field path>,
    includeArrayIndex: <string>, // Optional
    preserveNullAndEmptyArrays: <boolean> // Optional
  }
}
```

- **Doc Link:** https://learn.microsoft.com/en-us/azure/documentdb/operators/aggregation/$unwind

### $currentOp

## Variables in Aggregation Expressions

### $$NOW

### $$ROOT

### $$REMOVE

### $$CURRENT

### $$DESCEND

### $$PRUNE

### $$KEEP

## Not Listed

Operators below are present on the compatibility page but are not in scope
for this package (deprecated or not available in DocumentDB).

- **$where** (Evaluation Query Operators)  Deprecated in Mongo version 8.0
- **$meta** (Projection Operators)  Not in scope
- **$accumulator** (Custom Aggregation Expression Operators)  Deprecated in Mongo version 8.0
- **$function** (Custom Aggregation Expression Operators)  Deprecated in Mongo version 8.0
- **$meta** (Text Expression Operator)  Not in scope
- **$accumulator** (Accumulators ($group, $bucket, $bucketAuto, $setWindowFields))  Deprecated in Mongo version 8.0
- **$changeStreamSplitLargeEvent** (Aggregation Pipeline Stages)  Not in scope
- **$listSampledQueries** (Aggregation Pipeline Stages)  Not in scope
- **$listSearchIndexes** (Aggregation Pipeline Stages)  Not in scope
- **$listSessions** (Aggregation Pipeline Stages)  Not in scope
- **$planCacheStats** (Aggregation Pipeline Stages)  Not in scope
- **$shardedDataDistribution** (Aggregation Pipeline Stages)  Not in scope
- **$listLocalSessions** (Aggregation Pipeline Stages)  Not in scope
- **$$CLUSTER_TIME** (Variables in Aggregation Expressions)  Not in scope
- **$$SEARCH_META** (Variables in Aggregation Expressions)  Not in scope
- **$$USER_ROLES** (Variables in Aggregation Expressions)  Not in scope
